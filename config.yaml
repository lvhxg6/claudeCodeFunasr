# FunASR 服务配置

model:
  # 流式模型
  name: "paraformer-zh-streaming"

  # VAD 模型（语音端点检测）
  vad_model: "fsmn-vad"

  # 标点恢复模型
  punc_model: "ct-punc"

server:
  host: "127.0.0.1"
  port: 10095

  # WebSocket 路径
  ws_path: "/ws/transcribe"

streaming:
  # 音频块大小（毫秒）- 服务端累积到此大小才推理
  chunk_ms: 600

  # 采样率
  sample_rate: 16000

  # FunASR 流式参数
  # chunk_size: [左填充, 处理窗口, 前向看]
  # 10*60ms=600ms 处理窗口, 5*60ms=300ms 前向看
  # 总延迟约 900ms
  chunk_size: [0, 10, 5]

  # 每次推理的采样点数 (CHUNK_SIZE[1] * 960 = 9600)
  chunk_stride: 9600

  # 编码器/解码器回看
  encoder_chunk_look_back: 4
  decoder_chunk_look_back: 1

  # 最大并发连接数
  max_connections: 10

  # 音量阈值（RMS，0.0-1.0）
  # 低于此阈值的音频被视为噪音，不进行识别
  # 建议值：0.01-0.05，根据环境噪音调整
  energy_threshold: 0.02

logging:
  level: "INFO"
  file: "logs/service.log"
